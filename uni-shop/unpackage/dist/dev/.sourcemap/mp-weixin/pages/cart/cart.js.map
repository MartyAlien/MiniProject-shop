{"version":3,"sources":["uni-app:///main.js","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?92db","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?9446","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?9514","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?18d8","uni-app:///pages/cart/cart.vue","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?096a","webpack:///E:/MiniProject-shop/uni-shop/pages/cart/cart.vue?6fb0"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACiL;AACjL,gBAAgB,2LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAuqB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiF3rB,qE;;;;;;;AAOA;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,cAFA;AAGA,uBAHA;AAIA,mBAJA;AAKA,iBALA;;AAOA,GATA;AAUA;AACA,uBADA,iCACA;;;AAGA,qCAHA,SAGA,OAHA;AAIA;AACA;AACA,iBADA,EACA,UADA;AAEA;AACA;AACA,2CATA;;AAWA,yCAXA;;AAaA,KAdA;AAeA,WAfA,mBAeA,IAfA,EAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnCA;AAoCA;AACA,mBArCA,2BAqCA,QArCA,EAqCA;AACA;AADA,UAEA,IAFA,GAEA,UAFA,CAEA,IAFA;AAGA;AACA;AACA;AACA;;AAEA;;AAEA,KA/CA;AAgDA;AACA,sBAjDA,gCAiDA;AACA;AADA;;;AAKA,gBALA,CAGA,IAHA,eAGA,IAHA,CAIA,UAJA,eAIA,UAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,KA7DA;AA8DA;AACA,qBA/DA,6BA+DA,CA/DA,EA+DA;AACA;AACA,yBAFA,GAEA,CAFA,CAEA,SAFA,EAEA,EAFA,GAEA,CAFA,CAEA,EAFA;AAGA;AACA,oBAJA,GAIA,YAJA,CAIA,IAJA;AAKA;AACA,qBANA,GAMA,wDANA;AAOA;AAPA,sBAQA,yCARA;;AAUA;AACA,sCADA,GAVA,SAUA,GAVA;;AAaA;AACA;AACA;AACA,iBAhBA;;AAkBA;AACA;AACA;AACA,qCArBA;;AAuBA,KAtFA;AAuFA;AACA,aAxFA,uBAwFA;AACA;AADA,+BAEA,YAFA,EAEA,OAFA,gBAEA,OAFA,EAEA,QAFA,gBAEA,QAFA;AAGA,gCAHA;AAIA,kEAJA;;;;AAQA,8BARA;AASA,gEATA;;;AAYA;AACA;AACA,uCADA,IAbA;;;AAiBA,KAzGA,EAVA;;AAqHA,QArHA,oBAqHA;AACA;AACA;AACA;AACA;AACA;AACA,GA3HA;AA4HA;AACA,eADA,uBACA,CADA,EACA;AACA;AACA,KAHA,EA5HA,E;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAs9B,CAAgB,q8BAAG,EAAC,C;;;;;;;;;;;ACA1+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"priceFilter\")(_vm.totalPrice)\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- 收货地址 -->\r\n\t\t<view class=\"revice_address_row\">\r\n\t\t\t<!-- 当收货地址 不存在 按钮显示  对象 空对象 bool类型也是true  -->\r\n\t\t\t<view class=\"address_btn\" v-if=\"!address.userName\">\r\n\t\t\t\t<button @click=\"handleChooseAddress\" type=\"primary\" plain>获取收货地址</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- 当收货地址 存在 详细信息就显示 -->\r\n\t\t\t<view v-else class=\"user_info_row\">\r\n\t\t\t\t<view class=\"user_info\">\r\n\t\t\t\t\t<view>{{address.userName}}</view>\r\n\t\t\t\t\t<view>{{address.all}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"user_phone\">{{address.telNumber}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 购物车内容 -->\r\n\t\t<view class=\"cart_content\">\r\n\t\t\t<view class=\"cart_title\">购物车</view>\r\n\t\t\t<view class=\"cart_main\">\r\n\t\t\t\t<!-- 当cart数组 长度不为0 显示 商品信息 -->\r\n\t\t\t\t<block v-if=\"cart.length!==0\">\r\n\t\t\t\t\t<view class=\"cart_item\" v-for=\"(item,index) in cart\" :key=\"item.goods_id\">\r\n\t\t\t\t\t\t<!-- 复选框 -->\r\n\t\t\t\t\t\t<view class=\"cart_chk_wrap\">\r\n\t\t\t\t\t\t\t<checkbox-group @click=\"handeItemChange(item.goods_id)\">\r\n\t\t\t\t\t\t\t\t<checkbox :checked=\"item.checked\"></checkbox>\r\n\t\t\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 商品图片 -->\r\n\t\t\t\t\t\t<navigator class=\"cart_img_wrap\">\r\n\t\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"item.goods_small_logo\"></image>\r\n\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t\t<!-- 商品信息 -->\r\n\t\t\t\t\t\t<view class=\"cart_info_wrap\">\r\n\t\t\t\t\t\t\t<view class=\"goods_name\">{{item.goods_name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"goods_price_wrap\">\r\n\t\t\t\t\t\t\t\t<view class=\"goods_price\">￥{{item.goods_price}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"cart_num_tool\">\r\n\t\t\t\t\t\t\t\t\t<view @click=\"handleItemNumEdit({id:item.goods_id,operation:-1})\" class=\"num_edit\">-</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"goods_num\">{{item.num}}</view>\r\n\t\t\t\t\t\t\t\t\t<view @click=\"handleItemNumEdit({id:item.goods_id,operation:1})\" class=\"num_edit\">+</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t\t<block v-else>\r\n\t\t\t\t\t<image mode=\"widthFix\"\r\n\t\t\t\t\t\tsrc=\"http://hbimg.b0.upaiyun.com/e1b1467beea0a9c7d6a56b32bac6d7e5dcd914f7c3e6-YTwUd6_fw658\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部工具栏 -->\r\n\t\t<view class=\"footer_tool\">\r\n\t\t\t<!-- 全选 -->\r\n\t\t\t<view class=\"all_chk_wrap\">\r\n\t\t\t\t<checkbox-group @click=\"handleItemAllCheck\">\r\n\t\t\t\t\t<checkbox :checked=\"allChecked\">全选</checkbox>\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t</view>\r\n\t\t\t<!-- 总价格 -->\r\n\t\t\t<view class=\"total_price_wrap\">\r\n\t\t\t\t<view class=\"total_price\">\r\n\t\t\t\t\t合计: <text class=\"total_price_text\">￥{{totalPrice | priceFilter}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>包含运费</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 结算 -->\r\n\t\t\t<view class=\"order_pay_wrap\" @click=\"handlePay\">\r\n\t\t\t\t结算({{totalNum}})\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetSetting,\r\n\t\tchooseAddress,\r\n\t\topenSetting,\r\n\t\tshowModal,\r\n\t\tshowToast\r\n\t} from \"../../utils/asyncWx.js\";\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taddress: {},\r\n\t\t\t\tcart: [],\r\n\t\t\t\tallChecked: false,\r\n\t\t\t\ttotalPrice: 0,\r\n\t\t\t\ttotalNum: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync handleChooseAddress() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 4 调用获取收货地址的 api\r\n\t\t\t\t\tlet address = await uni.chooseAddress();\r\n\t\t\t\t\tthis.address = address[1];\r\n\t\t\t\t\tthis.address.all = address[1].provinceName + address[1].cityName + address[1].countyName + address[\r\n\t\t\t\t\t\t1].detailInfo;\r\n\t\t\t\t\t// 5 存入到缓存中\r\n\t\t\t\t\tuni.setStorageSync(\"address\", this.address);\r\n\t\t\t\t\tconsole.log(this.address);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetCart(cart) {\r\n\t\t\t\tlet allChecked = true;\r\n\t\t\t\t// 1 总价格 总数量\r\n\t\t\t\tlet totalPrice = 0;\r\n\t\t\t\tlet totalNum = 0;\r\n\t\t\t\tcart.forEach(v => {\r\n\t\t\t\t\tif (v.checked) {\r\n\t\t\t\t\t\ttotalPrice += v.num * v.goods_price;\r\n\t\t\t\t\t\ttotalNum += v.num;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tallChecked = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 判断数组是否为空\r\n\t\t\t\tallChecked = cart.length != 0 ? allChecked : false;\r\n\t\t\t\tthis.cart = cart;\r\n\t\t\t\tthis.totalPrice = totalPrice;\r\n\t\t\t\tthis.totalNum = totalNum;\r\n\t\t\t\tthis.allChecked = allChecked;\r\n\t\t\t\tuni.setStorageSync(\"cart\", cart);\r\n\t\t\t},\r\n\t\t\t // 商品的选中\r\n\t\t\thandeItemChange(goods_id) {\r\n\t\t\t\t// 2 获取购物车数组 \r\n\t\t\t\tlet { cart } = this.$data;\r\n\t\t\t\t// 3 找到被修改的商品对象\r\n\t\t\t\tlet index = cart.findIndex(v => v.goods_id === goods_id);\r\n\t\t\t\t// 4 选中状态取反\r\n\t\t\t\tcart[index].checked = !cart[index].checked;\r\n\t\t\r\n\t\t\t\tthis.setCart(cart);\r\n\t\t\r\n\t\t\t},\r\n\t\t\t// 商品全选功能\r\n\t\t\thandleItemAllCheck() {\r\n\t\t\t\t// 1 获取data中的数据\r\n\t\t\t\tlet {\r\n\t\t\t\t\tcart,\r\n\t\t\t\t\tallChecked\r\n\t\t\t\t} = this.$data;\r\n\t\t\t\t// 2 修改值\r\n\t\t\t\tallChecked = !allChecked;\r\n\t\t\t\t// 3 循环修改cart数组 中的商品选中状态\r\n\t\t\t\tcart.forEach(v => v.checked = allChecked);\r\n\t\t\t\t// 4 把修改后的值 填充回data或者缓存中\r\n\t\t\t\tthis.setCart(cart);\r\n\t\t\t},\r\n\t\t\t// 商品数量的编辑功能\r\n\t\t\tasync handleItemNumEdit(e) {\r\n\t\t\t\t// 1 获取传递过来的参数 \r\n\t\t\t\tconst { operation, id } = e;\r\n\t\t\t\t// 2 获取购物车数组\r\n\t\t\t\tlet { cart } = this.$data;\r\n\t\t\t\t// 3 找到需要修改的商品的索引\r\n\t\t\t\tconst index = cart.findIndex(v => v.goods_id === id);\r\n\t\t\t\t// 4 判断是否要执行删除\r\n\t\t\t\tif (cart[index].num === 1 && operation === -1) {\r\n\t\t\t\t\t// 4.1 弹窗提示\r\n\t\t\t\t\tconst res = await showModal({\r\n\t\t\t\t\t\tcontent: \"您是否要删除？\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tcart.splice(index, 1);\r\n\t\t\t\t\t\tthis.setCart(cart);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 4  进行修改数量\r\n\t\t\t\t\tcart[index].num += operation;\r\n\t\t\t\t\t// 5 设置回缓存和data中\r\n\t\t\t\t\tthis.setCart(cart);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点击 结算 \r\n\t\t\tasync handlePay(){\r\n\t\t\t\t// 1 判断收货地址\r\n\t\t\t\tconst {address,totalNum}=this.$data;\r\n\t\t\t\tif(!address.userName){\r\n\t\t\t\t\tawait showToast({title:\"您还没有选择收货地址\"});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 2 判断用户有没有选购商品\r\n\t\t\t\tif(totalNum===0){\r\n\t\t\t\t\tawait showToast({title:\"您还没有选购商品\"});\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\t// 3 跳转到 支付页面\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/pay/pay'\r\n\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// 1 获取缓存中的收货地址信息\r\n\t\t\tthis.address = uni.getStorageSync(\"address\");\r\n\t\t\t// 1 获取缓存中的购物车数据\r\n\t\t\tlet cart = uni.getStorageSync(\"cart\") || [];\r\n\t\t\tthis.setCart(cart);\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tpriceFilter(e){\r\n\t\t\t\treturn e.toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"./cart.css\");\r\n</style>\n","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1619148975858\n      var cssReload = require(\"E:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}